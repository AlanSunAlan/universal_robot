<?xml version="1.0"?>

<robot name="gripper" xmlns:interface="http://playerstage.sourceforge.net/gazebo/xmlschema/#interface"
                           xmlns:xacro="http://ros.org/wiki/xacro">  

  <!--Define constants-->
  <xacro:property name="gripper_mass" value="0.3" />
  <xacro:property name="finger_mass" value="0.1" />
  
  <xacro:macro name="gripper" params="parent name scaling *origin">
    <link name="gripper_link">
      <inertial>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <mass value="${gripper_mass}"/>
        <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0002" iyz="0" izz="0.0001"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://ur_description/meshes/gripper/gripper_base.dae" scale="${scaling} ${scaling} ${scaling}" />
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://ur_description/meshes/gripper/gripper_base.dae" scale="${scaling} ${scaling} ${scaling}" />
        </geometry>
      </collision>
    </link>
    <link name="right_gripper_finger_link">
      <inertial>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <mass value="${finger_mass}"/>
        <inertia ixx="0.002" ixy="0" ixz="0" iyy="0.0002" iyz="0" izz="0.0002"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://ur_description/meshes/gripper/finger_right.dae" scale="${scaling} ${scaling} ${scaling}" />
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://ur_description/meshes/gripper/finger_right_collision.dae" scale="${scaling} ${scaling} ${scaling}" />
        </geometry>
      </collision>
    </link>
    <link name="left_gripper_finger_link">
      <inertial>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <mass value="${finger_mass}"/>
        <inertia ixx="0.002" ixy="0" ixz="0" iyy="0.0002" iyz="0" izz="0.0002"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://ur_description/meshes/gripper/finger_left.dae" scale="${scaling} ${scaling} ${scaling}" />
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://ur_description/meshes/gripper/finger_left_collision.dae" scale="${scaling} ${scaling} ${scaling}" />
        </geometry>
      </collision>
    </link>

    <joint name="right_gripper_finger_joint" type="prismatic">
      <origin rpy="0 0 0" xyz="0.040 -0.03625 0" />
      <parent link="gripper_link" />
      <child link="right_gripper_finger_link" />
      <axis xyz="0 1 0" />
      <limit effort="100" lower="-0.01" upper="0.06" velocity="0.05" />
      <dynamics damping="0.7" />
    </joint>
    <joint name="left_gripper_finger_joint" type="prismatic">
      <origin rpy="0 0 0" xyz="0.040 0.03625 0" />
      <parent link="gripper_link" />
      <child link="left_gripper_finger_link" />
      <axis xyz="0 -1 0" />
      <limit effort="100" lower="-0.01" upper="0.06" velocity="0.05" />
      <dynamics damping="0.7" />
    </joint>
    <joint name="gripper_joint" type="fixed">
      <parent link="${parent}"/>
      <child link="gripper_link"/>
      <origin xyz="0.0 0.0 0.04" rpy="0 ${-pi/2} 0"/>
      <axis xyz="0 1 0" />
    </joint>

  </xacro:macro>
  
</robot>
